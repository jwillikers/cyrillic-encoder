= Cyrillic Encoder
Jordan Williams <jordan@jwillikers.com>
:experimental:
:icons: font
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]

image:https://img.shields.io/github/workflow/status/jwillikers/cyrillic-encoder/CMake[GitHub Workflow Status]

A Qt demo application for encoding alphanumeric characters as arbitrary Cyrillic symbols.

ifdef::env-github[]
++++
<p align="center">
  <img  alt="Cyrillic Encoder Demo" src="screenshots/Cyrillic Encoder Demo.gif?raw=true"/>
</p>
++++
endif::[]

ifndef::env-github[]
image::screenshots/Cyrillic Encoder Demo.gif[Cyrillic Encoder Demo, align=center]
endif::[]

== Getting Started

This section describes how to setup the build environment required by the project.
These instructions are for Fedora 35.

. Install the necessary system packages.
+
[source,sh]
----
sudo dnf -y install ccache clang clang-tools-extra cmake gcc-c++ git libasan libasan-static libcxx-devel libcxxabi-devel libglvnd-devel liblsan liblsan-static libtsan libtsan-static libubsan libubsan-static lld llvm llvm-static ninja-build perl-FindBin python3 python3-pip
----

. On `aarch64`, install `gcc-c++-aarch64-linux-gnu` to make Qt happy.
+
[source,sh]
----
sudo dnf -y install gcc-c++-aarch64-linux-gnu
----

. Install a few necessary Python build tools.
+
--
[source,sh]
----
python3 -m pip install --user cmakelang[YAML] conan
----

[NOTE]
====
`~/.local/bin` will need to be on your `PATH`.
====
--

== Build

{cpp} dependencies are managed with Conan.
When using a single configuration generator with CMake, set the appropriate build type when configuring the build.
Likely, this build type will be either _Debug_ or _Release_, both of which are enumerated below.
These examples also enable several helpful options to improve performance of the build and the resulting binaries.
These examples assume you are in the top-level directory of the project and using a build directory named `build`.


. First, clone the source code of this repository locally.
+
[source,sh]
----
git clone https://github.com/jwillikers/cyrillic-encoder.git
----

. Then change into the project directory.
+
[source,sh]
----
cd cyrillic-encoder
----

. Before running CMake, install the necessary dependencies with Conan, using the necessary compiler profile.
+
--
GCC::
+
[source,sh]
----
conan install . \
  --install-folder=cmake-build-debug \
  --build=missing \
  --profile:host=profiles/gcc.jinja \
  --profile:build=profiles/gcc.jinja
----

Clang::
+
[source,sh]
----
conan install . \
  --install-folder=cmake-build-debug \
  --build=missing \
  --profile:host=profiles/clang.jinja \
  --profile:build=profiles/clang.jinja
----
--

. Configure the build.
+
[source,sh]
----
cmake \
  -GNinja \
  -DCMAKE_TOOLCHAIN_FILE=conan_toolchain.cmake \
  -DCMAKE_UNITY_BUILD=yes \
  -DCMAKE_EXE_LINKER_FLAGS="-fuse-ld=lld" \
  -DCMAKE_MODULE_LINKER_FLAGS="-fuse-ld=lld" \
  -DCMAKE_SHARED_LINKER_FLAGS="-fuse-ld=lld" \
  -DCMAKE_C_FLAGS_DEBUG="-gsplit-dwarf" \
  -DCMAKE_CXX_FLAGS_DEBUG="-gsplit-dwarf" \
  -DCMAKE_CXX_CLANG_TIDY=/usr/bin/clang-tidy \
  -DCLANG_FORMAT_PROGRAM=/usr/bin/clang-format \
  -DUSE_SANITIZER="Address;Undefined" \
  -B cmake-build-debug -S .
----

. Build the project with CMake.
+
[source,sh]
----
cmake --build cmake-build-debug
----

=== Google Sanitizers

Support for Google Sanitizers is provided by the https://github.com/StableCoder/cmake-scripts[cmake-scripts] project.
Set the `USE_SANITIZER` CMake variable to an appropriate value as documented https://github.com/StableCoder/cmake-scripts#sanitizer-builds-sanitizerscmake[here].

Use the Address and Undefined Behavior sanitizers like so.

[source,sh]
----
cmake -DUSE_SANITIZER=Address;Undefined -B cmake-build-debug -S .
----

== Test

Unit tests use https://github.com/boost-ext/ut[[Boost::ext\].μt] and are written in {cpp}.
The unit tests can be run with https://cmake.org/cmake/help/latest/module/CTest.html[CTest].

. Change in to the build directory.
+
[source,sh]
----
cd cmake-build-debug
----

. Run the tests by executing the `ctest` executable.
+
[source,sh]
----
ctest
----

== Format

The https://clang.llvm.org/docs/ClangFormat.html[clang-format] and https://cmake-format.readthedocs.io/en/latest/cmake-format.html[cmake-format] tools are used to format the source code files.
The https://github.com/TheLartians/Format.cmake[Format.cmake] module provides build targets to simplify the use of these tools.

Format the source files by building the CMake target `fix-format`.

[source,sh]
----
cmake --build cmake-build-debug --target fix-format
----

== Contributing

Contributions in the form of issues, feedback, and even pull requests are welcome.
Make sure to adhere to the project's link:CODE_OF_CONDUCT.adoc[Code of Conduct].

== Open Source Software

This project is built on the hard work of countless open source contributors.
Several of these projects are enumerated below.

* https://asciidoctor.org/[Asciidoctor]
* https://www.boost.org/[Boost {cpp} Libraries]
* https://github.com/boost-ext/ut[[Boost::ext\].μt]
* https://ccache.dev/[ccache]
* https://github.com/TheLartians/Ccache.cmake[Ccache.cmake]
* https://clang.llvm.org/[Clang]
* https://clang.llvm.org/extra/clang-tidy/[Clang-Tidy]
* https://clang.llvm.org/docs/ClangFormat.html[ClangFormat]
* https://conan.io/[Conan]
* https://cmake.org/[CMake]
* https://cmake-format.readthedocs.io/en/latest/index.html[cmakelang]
* https://github.com/StableCoder/cmake-scripts[CMake Scripts]
* https://www.debian.org/[Debian]
* https://gcc.gnu.org/[GCC]
* https://git-scm.com/[Git]
* https://www.linuxfoundation.org/[Linux]
* https://github.com/microsoft/GSL[Microsoft's GSL]
* https://github.com/TheLartians/ModernCppStarter[ModernCppStarter]
* https://ninja-build.org/[Ninja]
* https://www.python.org/[Python]
* https://www.qt.io/[Qt]
* https://rouge.jneen.net/[Rouge]
* https://www.ruby-lang.org/en/[Ruby]
* https://ubuntu.com/[Ubuntu]

== Code of Conduct

The project's Code of Conduct is available in the link:CODE_OF_CONDUCT.adoc[Code of Conduct] file.

== License

This repository is licensed under the https://www.gnu.org/licenses/gpl-3.0.html[GPLv3], available in the link:LICENSE.adoc[license file].

© 2021 Jordan Williams

== Authors

mailto:{email}[{author}]
